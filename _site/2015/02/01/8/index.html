<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Testing Kinect</title>
  <meta name="description" content="In addition to its cliff sensors and bumpers, Kinect is one of the ways TurtleBot “sees” its environment. We’ve already installed the drivers for Kinect so n...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="/2015/02/01/8/">
  <link rel="alternate" type="application/rss+xml" title="Learn TurtleBot and ROS" href="/feed.xml" />
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="/js/jquery.fitvids.js"></script>
  <script>
	$(document).ready(function() {
		$(".video_container").fitVids();
	});
  </script>
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Learn TurtleBot and ROS</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">
<div class="page-navigation"> 
	   
				<div class="left"> 
                <a href="/2015/02/01/7/" title="Previous Post: 
Setting Up Networking">&laquo; Setting Up Networking</a> 
				</div>
         
         

        <div class="right"> 
         
                <a href="/2015/02/01/9/" title="next Post: 
Teleoperation">Teleoperation &raquo; </a> 
         
        </div> 
    <div class="clear">&nbsp;</div> 
</div>
  <header class="post-header">
    <h1 class="post-title">Testing Kinect</h1>
  </header>


        
      
    


  <article class="post-content">
    <p>In addition to its cliff sensors and bumpers, Kinect is one of the ways TurtleBot “sees” its environment. We’ve already installed the drivers for Kinect so now we’ll test it to make sure it works.</p>

<h2 id="test-driver-and-usb-connection-turtlebot-only">Test Driver and USB Connection (TurtleBot Only)</h2>

<p>On TurtleBot, close all terminals, then open a new window and run:</p>

<div class="highlight"><pre><code class="language-sh" data-lang="sh">roslaunch turtlebot_bringup minimal.launch</code></pre></div>

<p>Then open another terminal window and run:</p>

<div class="highlight"><pre><code class="language-sh" data-lang="sh">roslaunch openni_launch openni.launch</code></pre></div>

<p>If you get a collection of lines that start with <strong>process[camera…</strong> everything is perfect and you can skip the troubleshooting section below and move on to the “View Image Data” section. Leave the two terminal windows open.</p>

<div style="margin-bottom: 1.5em;">
	
	<div class="video_container" style="background-color: #eef; border-radius: 3px;"><iframe width="700" height="393" src="https://www.youtube.com/embed/QjFBrZZki-E?rel=0&amp;showinfo=0" style=" border:0;" allowfullscreen=""></iframe></div>
</div>

<h2 id="troubleshooting">Troubleshooting</h2>

<p>If you repeatedly receive:</p>

<div class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="o">[</span>INFO<span class="o">][</span><span class="c">#]: No devices connected.... waiting for devices to be connected</span></code></pre></div>

<p>this is probably because the Kinect driver wasn’t installed. <a href="/2015/02/01/5/">See Install Kinect Driver in our previous post</a>.</p>

<p>If you receive:</p>

<div class="highlight"><pre><code class="language-sh" data-lang="sh">terminate called after throwing an instance of <span class="s1">&#39;openni_wrapper::OpenNIException&#39;</span></code></pre></div>

<p>or</p>

<div class="highlight"><pre><code class="language-sh" data-lang="sh">Image: PrimeSense/SensorV2/5.1.2.1: Failed to <span class="nb">set </span>USB interface!</code></pre></div>

<p>these have occurred because Kinect isn’t compatible with USB 3.0. Plug it into a USB 2.0 port. (Problems can also occur with USB 2.0 ports that are 3.0 compatible.).</p>

<h4 id="troubleshooting-i-dont-have-a-usb-20-port-or-its-still-giving-the-above-errors">Troubleshooting: I don’t have a USB 2.0 port or it’s still giving the above errors</h4>

<p>We’re going to disable USB 3.0 in the BIOS.</p>

<ol>
  <li>Boot into BIOS by rebooting your computer and holding down the F2 key (it could be a different key on your computer).</li>
  <li>Go to the <em>advanced</em> tab.</li>
  <li>This part varies depending on your computer. If you have a USB option go there first.</li>
  <li>If your BIOS lists <strong>xHCI</strong>, disable it.</li>
  <li>If you BIOS lists <strong>USB Debugging</strong>, enable it.</li>
  <li>Save and exit BIOS.</li>
</ol>

<h4 id="if-you-still-have-trouble-check-that-the-kinect-has-power-by-running">If you still have trouble, check that the Kinect has power by running:</h4>

<div class="highlight"><pre><code class="language-sh" data-lang="sh">lsusb</code></pre></div>

<p>and verify that there are three lines about <strong>Microsoft Corp.,</strong> two of which are regarding <strong>XBox NUI</strong>. If you only have one line or none, Kinect may not be plugged in or is lacking power.</p>

<h2 id="view-image-data-workstation">View Image Data (Workstation)</h2>

<p>Close all terminal windows, open a new one, and run:</p>

<div class="highlight"><pre><code class="language-sh" data-lang="sh">rosrun image_view image_view image:<span class="o">=</span>/camera/rgb/image_color</code></pre></div>

<p>You should see a live video stream from the Kinect. Press ‘q’ to quit.</p>

<p>This is not much more exciting than a webcam, so let’s see a visual representation of distance by running:</p>

<div class="highlight"><pre><code class="language-sh" data-lang="sh">rosrun image_view image_view image:<span class="o">=</span>/camera/depth/image</code></pre></div>

<p>You should see a grayscale video stream where objects closer to the Kinect appear darker.</p>

<p><em><strong>TIP:</strong> If you see only solid gray, check that you are still running openni.launch on TurtleBot.</em></p>

<p>Press ‘q’ to quit the depth image.</p>

<div style="margin-bottom: 1.5em;">
	
	<div class="video_container" style="background-color: #eef; border-radius: 3px;"><iframe width="700" height="393" src="https://www.youtube.com/embed/9xN7zRUZsIw?rel=0&amp;showinfo=0" style=" border:0;" allowfullscreen=""></iframe></div>
</div>

<h2 id="stop-openni-turtlebot">Stop Openni (TurtleBot)</h2>

<p>Go to the terminal on TurtleBot where <strong>openni</strong> is running. Press ctrl + C to stop it. Leave <strong>minimal.launch</strong> running. Now run:</p>

<div class="highlight"><pre><code class="language-sh" data-lang="sh">roslaunch turtlebot_bringup 3dsensor.launch</code></pre></div>

<div style="margin-bottom: 1.5em;">
	
	<div class="video_container" style="background-color: #eef; border-radius: 3px;"><iframe width="700" height="393" src="https://www.youtube.com/embed/-eGh2QJF398?rel=0&amp;showinfo=0" style=" border:0;" allowfullscreen=""></iframe></div>
</div>

<h2 id="rviz-workstation">RViz (Workstation)</h2>

<p>Close all terminal windows, then open a new one and run:</p>

<div class="highlight"><pre><code class="language-sh" data-lang="sh">roslaunch turtlebot_rviz_launchers view_robot.launch</code></pre></div>

<p>Under “Displays” check “Registered DepthCloud” and “Image”. Hold down the left mouse button to rotate or the middle mouse button to move the camera.</p>

<p><strong>*NOTE:</strong> If you don’t see the display panel, scroll your mouse to the top of the screen and click “Panels”. Check the box next to “Display Panel” to enable it. </p>

<p>If you have trouble, here’s a YouTube walkthrough:</p>

<div style="margin-bottom: 1.5em;">
	
	<div class="video_container" style="background-color: #eef; border-radius: 3px;"><iframe width="700" height="393" src="https://www.youtube.com/embed/QRWObANzrCk?rel=0&amp;showinfo=0" style=" border:0;" allowfullscreen=""></iframe></div>
</div>

<h2 id="learn-more-at-wikirosorg">Learn more at wiki.ros.org</h2>

<ul>
  <li><a href="http://wiki.ros.org/turtlebot_bringup/Tutorials/indigo/3D%20Visualisation">3D Visualization</a></li>
</ul>

<h2 id="troubleshooting-1">Troubleshooting</h2>

<p>If you get a warning about “no image available”, try closing everything on both TurtleBot and workstation and then re-opening.</p>


  </article>

</div>

<div class="page-navigation"> 
		<hr>
		<div class="page-navigation-title">Keep Reading</div>
        <div class="clear">&nbsp;</div> 
        
         
				<div class="left"> 
                <a href="/2015/02/01/7/" title="Previous Post: 
Setting Up Networking">&laquo; Setting Up Networking</a> 
				</div>
         

        <div class="right"> 
         
                <a href="/2015/02/01/9/" title="next Post: 
Teleoperation">Teleoperation &raquo; </a> 
         
        </div> 
        <div class="clear">&nbsp;</div> 
</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <!--<h2 class="footer-heading">Learn TurtleBot and ROS</h2>-->
	<div style="margin-bottom:1.5em;">
	<h4><a href="https://groups.google.com/forum/#!forum/ros-sig-turtlebot" target="_blank">Questions / comments?  Post them on TurtleBot's Group</a></h4>
	</div>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>Learn TurtleBot and ROS</li>
          <li><a href="mailto:mwsilliman@gmail.com">mwsilliman@gmail.com</a></li>
           
          <li>
            <a href="https://github.com/markwsilliman">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">markwsilliman</span>
            </a>
          </li>
          

          
        </ul>
      </div>

    <!--
  <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
         
        </ul>
      </div>
-->

      <div class="footer-col  footer-col-3">
        <p class="text">An open source getting started guide for web, mobile and maker developers interested in robotics.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
